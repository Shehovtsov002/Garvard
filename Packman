#include <stdio.h>
#include <ctype.h>
#include <stdlib.h>
#include <time.h>
#include <string.h>

// Как он работает?
// Ходит(wasd) напр: wddsa - пойти вверх, 2 раза вправо, вниз, влево
// Как работает карта? # - стены, @ - пакман, + - сборный предмет, 0 - привидение

const int X = 10;
const int Y = 10;
// Пакман координаты
int x = 5;
int y = 7;
// Набранные очки
int score = 0;

int map[10][10] = {
    {'#','#','#','#','#','#','#','#','#','#'},
    {'#',' ',' ','#',' ','#',' ','#','+','#'},
    {'#',' ','+','#','+',' ','+','#','+','#'},
    {'#',' ',' ',' ',' ','#',' ',' ',' ','#'},
    {'#','#','#','#','+','#','#','#','#','#'},
    {'#',' ',' ','+',' ',' ',' ',' ',' ','#'},
    {'#','+','#','#','#','+',' ','+',' ','#'},
    {'#',' ',' ',' ','#',' ',' ',' ',' ','#'},
    {'#',' ',' ',' ','#',' ',' ',' ',' ','#'},
    {'#','#','#','#','#','#','#','#','#','#'}
};

void printMap(){
    printf("Score = %d\n", score);

    for(int i = 0; i < X; i++){
        for(int j = 0; j < Y; j++){
            printf("%c", map[i][j]);
        }
            printf("\n");
    }
            printf("\n");
}

void addScore(){
    if(map[x][y]=='+'){
        score = score + 1;
    }
}

void _moveTo(int _x, int _y){
    // Старые координаты меняем на пустоту
    map[x][y] = ' ';
    // Задаем новые координаты
    x = _x;
    y = _y;
    // Проверяем добавить ли очки
    addScore();
    // Двигаем пакмана
    map[x][y] = '@';
    // Перерисовываем карту
    printMap();
}

void moveTo(char dir){
    switch(dir){
        case 'w':
            if(x-1 < 0) break;
            if(map[x-1][y] == '#') break;
            _moveTo(x-1, y);
        break;

        case 'a':
            if(y-1 < 0) break;
            if(map[x][y-1] == '#') break;
            _moveTo(x, y-1);
        break;

        case 's':
            if(x+1 > X-1) break;
            if(map[x+1][y] == '#') break;
            _moveTo(x+1, y);
        break;

        case 'd':
            if(y+1 > Y+1) break;
            if(map[x][y+1] == '#') break;
            _moveTo(x, y+1);
        break;
    }
}

int main(){
    map[x][y] = '@';
    printMap();
    char dir;

    do{
        scanf("%c", &dir);
        moveTo(dir);
    }while(dir != 'q');

    return 0;
}
